<div class="page-wrapper" style="background-image: url(../../../assets/img/31.jpg);" id="main-wrapper"
    data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full" data-sidebar-position="fixed"
    data-header-position="fixed">
    <div class="position-relative overflow-hidden text-bg-light min-vh-100 d-flex align-items-center justify-content-center">
        <div class="d-flex align-items-center justify-content-center w-100">
            <div class="row justify-content-center w-100">
                <div class="col-md-8 col-lg-6 col-xxl-3">
                    <div class="card mb-0 border-0 shadow-sm bg-dark" style="border-radius: 15px;">
                        <div class="card-body text-center">
                            <a routerLink="" class="text-nowrap logo-img py-3 w-100 d-block">
                                <h3 class="font-weight-bold text-white">Password Reset</h3>
                            </a>
                            <form class="col-12 text-center" [formGroup]="resetPasswordForm">
                                <!-- One-time Code Field -->
                                <div class="form-group mb-3">
                                  <input 
                                    type="text" 
                                    formControlName="code" 
                                    class="form-control text-white bg-transparent border-light" 
                                    placeholder="Enter One-time Code"
                                  />
                                  <div *ngIf="resetPasswordForm.get('code')?.hasError('required') && resetPasswordForm.get('code')?.touched" 
                                       class="text-danger">
                                    Code is required.
                                  </div>
                                  <span>{{codeError}}</span>
                                </div>
                              
                                <!-- Password Field -->
                                <div class="form-group mb-3">
                                  <input 
                                    type="password" 
                                    formControlName="password" 
                                    class="form-control text-white bg-transparent border-light" 
                                    placeholder="Enter Password"
                                  />
                                  <div *ngIf="resetPasswordForm.get('password')?.hasError('required') && resetPasswordForm.get('password')?.touched" 
                                       class="text-danger">
                                    Password is required.
                                  </div>
                                </div>
                              
                                <!-- Confirm Password Field -->
                                <div class="form-group mb-3">
                                  <input 
                                    type="password" 
                                    formControlName="confirmPassword" 
                                    class="form-control text-white bg-transparent border-light" 
                                    placeholder="Confirm Password"
                                  />
                                  <div *ngIf="resetPasswordForm.get('confirmPassword')?.hasError('required') && resetPasswordForm.get('confirmPassword')?.touched" 
                                       class="text-danger">
                                    Confirm Password is required.
                                  </div>
                                  <div *ngIf="resetPasswordForm.hasError('passwordMismatch') && resetPasswordForm.get('confirmPassword')?.touched" 
                                       class="text-danger">
                                    Passwords do not match!
                                  </div>
                                </div>
                              
                                <!-- Submit Button (disabled if form is invalid) -->
                                <button 
                                  type="submit" 
                                  class="btn btn-outline-success w-100 py-2 mt-3" 
                                  (click)="resetPassword()"
                                  [disabled]="resetPasswordForm.invalid"
                                >
                                  Reset Password
                                </button>
                              </form>
                              
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
